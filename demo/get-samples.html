<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../gid-get-samples.html">
<style>
  	table, th, td {
    border: 1px solid grey;
    border-collapse: collapse;
	}
	td {
	    text-align: center;
	}
  </style>
    
<dom-module id="get-samples">
    <template>
        <gid-get-samples api-url='https://srv-34-197-77-167.globalids.com:8443/api/v1' 
        limit = '50' columns = '["-4110485992817674132","7543548824685721599"]' api-token = 'MTAxNjUwMzAxMTUwMzU1NjY3ODU3MDA5MDFY'
        get-samples = true
        samplecolumns = {{samplecolumns}} samplerows = {{samplerows}} ></gid-get-samples>
        		<template is="dom-if" if="[[fetchSamplesSuccess]]">
	                <p></p>
	                <template is="dom-if" if="[[samplecolumns.length]]">
		                <table style="width:50%">
						  <tr>
						    <th>{{col1}}</th> 
						    <th>{{col2}}</th>
						  </tr>
						  <template is="dom-repeat" items="[[samplerows]]">
						  <tr>
						    <td>{{item.0}}</td>
						    <td>{{item.1}}</td> 
						  </tr>
						  </template>
						</table>
					</template>
    		</template>
    		<template is="dom-if" if="![[fetchSamplesSuccess]]">
                <p>{{response.developerMessage}}</p>
           </template>
    </template>
    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'get-samples',
                properties: {
                    samplerows: {
                    	type: Array,
                    	notify: true   
                   },
                   samplecolumns: {
                   	type: Array,
                   	notify: true,
                   	observer: 'samplecolumnsArrObserver'
                  },
                  col1: {
                	  type: String,
                      notify: true,
                      value: ""
                  },
                  col2: {
                	  type: String,
                      notify: true,
                      value: ""
                  },
                  fetchSamplesSuccess:{
                	  type: Boolean,
                	  notify: true,
                	  value: false
                  }
                },
                samplecolumnsArrObserver: function(){
                	if(this.samplecolumns.errorCode){
                		this.fetchSamplesSuccess = false;
                	}
                	if(this.samplecolumns.length > 0){
                		this.fetchSamplesSuccess = true;
                		this.col1 =  this.samplecolumns[0]["label"];
                		this.col2 =  this.samplecolumns[1]["label"];
                	}
                }

            });
        })();


    </script>
</dom-module>
